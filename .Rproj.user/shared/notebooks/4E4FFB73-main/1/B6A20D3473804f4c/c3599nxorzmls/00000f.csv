"0","# summarize each team's yearly statistics for their home and away games"
"0","team_data_home <- game_data %>%"
"0","  filter(year(game_date) >= 1986) %>%"
"0","  rename(team_id = team_id_home) %>%"
"0","  select(-contains(""away""))"
"0",""
"0","team_data_away <- game_data %>%"
"0","  filter(year(game_date) >= 1986) %>%"
"0","  rename(team_id = team_id_away) %>%"
"0","  select(-contains(""home""))"
"0",""
"0","# remove the home and away suffixes on both data sets so their rows can be bound"
"0","names(team_data_home) <- gsub(""_home"", """", names(team_data_home))"
"0","names(team_data_away) <- gsub(""_away"", """", names(team_data_away))"
"0",""
"0","# function that determines the current NBA season based on year"
"0","nba_season <- function (date) {"
"0","  ifelse("
"0","    month(date) %in% 9:12,"
"0","    year(date),"
"0","    year(date) - 1"
"0","  )"
"0","}"
"0",""
"0","# bind the rows, group by team and year, and add summary statistics for each "
"0","# season"
"0","team_data <- team_data_home %>%"
"0","  bind_rows(team_data_away) %>% "
"0","  arrange(game_date) %>%"
"0","  group_by(team_id, season_id) %>%"
"0","  summarise("
"0","    season = nba_season(first(game_date)),"
"0","    team_name = last(team_name), "
"0","    team_abbreviation = last(team_abbreviation), "
"0","    games_played = n(),"
"0","    feild_goals_made = sum(fgm),"
"0","    feild_goals_attempted = sum(fga),"
"0","    three_pointers_made = sum(fg3m),"
"0","    three_pointers_attempted = sum(fg3a),"
"0","    two_pointers_attempted = feild_goals_attempted - three_pointers_attempted,"
"0","    two_pointers_made = feild_goals_made - three_pointers_made,"
"0","    free_throws_made = sum(ftm),"
"0","    free_throws_attempted = sum(fta),"
"0","    offensive_rebounds = sum(oreb),"
"0","    deffensive_rebounds = sum(dreb),"
"0","    rebounds = sum(dreb),"
"0","    assits = sum(ast),"
"0","    steals = sum(stl),"
"0","    blocks = sum(blk),"
"0","    turnovers = sum(tov),"
"0","    fouls = sum(pf),"
"0","    points = sum(pts),"
"0","    plus_minus = sum(plus_minus)"
"0","  )  %>%"
"0","  mutate("
"0","    across(-c(""team_name"", ""team_abbreviation"", ""games_played""), "
"0","           (function (x) x / games_played), "
"0","           .names = ""avg_{.col}_per_game""),"
"0","    feild_goal_percentage = feild_goals_made / feild_goals_attempted,"
"0","    two_point_percentage = two_pointers_made / two_pointers_attempted,"
"0","    three_point_percentage = three_pointers_made / three_pointers_attempted,"
"0","    free_throw_percentage = free_throws_made / free_throws_attempted,"
"0","  )"
"2","`summarise()` has grouped output by 'team_id'. You can override using the `.groups` argument."
"0","team_data"
